CREATE DATABASE AGENDAR;
USE AGENDAR;

DROP TABLE IF EXISTS EMPRESA;
CREATE TABLE EMPRESA (
  ID_EMPRESA PRIMARY KEY INT AUTO_INCREMENT,
  CNPJ CHAR (14) UNIQUE,
  NOME_EMPRESA VARCHAR (75) NOT NULL,
  EMAIL_EMPRESA VARCHAR (150) NOT NULL UNIQUE,
  SENHA_EMPRESA CHAR (64) NOT NULL,
  ULTIMA_DATA_DOACAO DATE,
  PROXIMA_DATA_DOACAO DATE
);

DROP TABLE IF EXISTS CLIENTE;
CREATE TABLE CLIENTE (
  ID_CLIENTE INT PRIMARY KEY,
  NOME_CLIENTE VARCHAR (75),
  CPF_CLIENTE CHAR (11) NOT NULL,
  TEL_CLIENTE CHAR (11) NOT NULL UNIQUE,
  EMAIL_CLIENTE VARCHAR (150) UNIQUE,
  SENHA_CLIENTE CHAR (64) NOT NULL
);

DROP TABLE IF EXISTS AGENDAMENTOS_EMPRESA;
CREATE TABLE AGENDAMENTOS_EMPRESA (
  ID_AGENDAMENTO INT AUTO_INCREMENT PRIMARY KEY,
  ID_CLIENTE_EMPRESA INT NOT NULL REFERENCES EMPRESA (ID_CLIENTE_EMPRESA),
  DATA_CRIACAO_AGENDAMENTO DATE,
  DATA_AGENDAMENTO DATE
);

DROP TABLE iF EXISTS OBJ_COMPLEMENTO_AGENDAMENTOS;
CREATE TABLE OBJ_COMPLEMENTO_AGENDAMENTOS (
  ID_OBJ INT AUTO_INCREMENT PRIMARY KEY,
  ID_AGENDAMENTO INT NOT NULL REFERENCES AGENDAMENTOS_EMPRESA(ID_AGENDAMENTO),
  OBJ TEXT
);